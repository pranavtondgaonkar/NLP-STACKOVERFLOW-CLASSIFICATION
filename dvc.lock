schema: '2.0'
stages:
  get_data:
    cmd: python src/main/stage_01_get_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: a2b9f69aba4019b732a3883e6213b922
      size: 402
    - path: configs/logging.py
      md5: eaad80a10c6123fb8658488c325782e8
      size: 1606
    - path: src/main/stage_01_get_data.py
      md5: 6dcd34868a428719116060332d6893fb
      size: 1311
    - path: src/utils/utils.py
      md5: c19378912aa540f124672bc1be3e1f17
      size: 974
    outs:
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
  prepare_data:
    cmd: python src/main/stage_02_prepare_data.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: a2b9f69aba4019b732a3883e6213b922
      size: 402
    - path: configs/logging.py
      md5: eaad80a10c6123fb8658488c325782e8
      size: 1606
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
    - path: params.yaml
      md5: 9bfc3b5d8de2d568b4965e0dce1258a2
      size: 131
    - path: src/main/stage_02_prepare_data.py
      md5: 67e3d77a874b2c32f36a70833a116f4f
      size: 1814
    - path: src/utils/data_management.py
      md5: 13819555db0469042d51da73648fee9b
      size: 883
    - path: src/utils/utils.py
      md5: c19378912aa540f124672bc1be3e1f17
      size: 974
    params:
      params.yaml:
        prepare_data.seed: 42
        prepare_data.split: 0.3
    outs:
    - path: artifacts/prepared_data/test.tsv
      md5: ac577403d970be6cbe986f19e1ea56ca
      size: 7136988
    - path: artifacts/prepared_data/train.tsv
      md5: a782fc2e37219d7468d20a15d9f74e91
      size: 16724331
  featurize:
    cmd: python src/main/stage_03_featurization.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/prepared_data/test.tsv
      md5: ac577403d970be6cbe986f19e1ea56ca
      size: 7136988
    - path: artifacts/prepared_data/train.tsv
      md5: a782fc2e37219d7468d20a15d9f74e91
      size: 16724331
    - path: configs/config.yaml
      md5: a2b9f69aba4019b732a3883e6213b922
      size: 402
    - path: configs/logging.py
      md5: eaad80a10c6123fb8658488c325782e8
      size: 1606
    - path: src/main/stage_03_featurization.py
      md5: 0b27f1b9f68c9a57158bd3a6c3978f40
      size: 2602
    - path: src/utils/featurize.py
      md5: 9a4c753498c149fe5bfaeba51f46f162
      size: 523
    - path: src/utils/utils.py
      md5: c19378912aa540f124672bc1be3e1f17
      size: 974
    params:
      params.yaml:
        featurize.max_features: 2500
        featurize.ngrams: 2
    outs:
    - path: artifacts/features/test.pkl
      md5: a9ba579df07913f25aea7479c9851175
      size: 3664436
    - path: artifacts/features/train.pkl
      md5: 35665b5364cd704598062306e1c5e35a
      size: 8599676
  train:
    cmd: python src/main/stage_04_train.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/features/train.pkl
      md5: 35665b5364cd704598062306e1c5e35a
      size: 8599676
    - path: configs/config.yaml
      md5: a2b9f69aba4019b732a3883e6213b922
      size: 402
    - path: configs/logging.py
      md5: eaad80a10c6123fb8658488c325782e8
      size: 1606
    - path: src/main/stage_04_train.py
      md5: 656e83485edcf32f66e940612d68cc8e
      size: 1965
    - path: src/utils/utils.py
      md5: c19378912aa540f124672bc1be3e1f17
      size: 974
    params:
      params.yaml:
        train.min_split: 16
        train.n_est: 120
        train.seed: 101
    outs:
    - path: artifacts/model/model.pkl
      md5: ec9fe9e40b89c2fe4aefb6551fb75de3
      size: 3676361
  evaluate:
    cmd: python src/main/stage_05_evaluate.py --config=configs/config.yaml
    deps:
    - path: artifacts/features/test.pkl
      md5: a9ba579df07913f25aea7479c9851175
      size: 3664436
    - path: artifacts/model/model.pkl
      md5: ec9fe9e40b89c2fe4aefb6551fb75de3
      size: 3676361
    - path: configs/config.yaml
      md5: a2b9f69aba4019b732a3883e6213b922
      size: 402
    - path: configs/logging.py
      md5: eaad80a10c6123fb8658488c325782e8
      size: 1606
    - path: src/main/stage_05_evaluate.py
      md5: cb2a4916d984837d96b68864e967d233
      size: 2419
    - path: src/utils/utils.py
      md5: c19378912aa540f124672bc1be3e1f17
      size: 974
    outs:
    - path: prc.json
      md5: ea827273c5fad542fb041ba594792953
      size: 123310
    - path: roc.json
      md5: 0a391ebdaccfb980685d83c028a81019
      size: 139649
    - path: scores.json
      md5: a4f05e5c893133ad2ec0c784a7e24219
      size: 73
